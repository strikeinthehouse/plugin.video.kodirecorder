name: Criar arquivo .zip
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Verificar repositório
      run: |
        echo "Repositório: ${{ github.repository }}"
        echo "Branch: ${{ github.ref }}"

    - name: Clonar repositório
      uses: actions/checkout@v2

    - name: Listar arquivos
      run: |
        cd ${{ github.workspace }}
        find . -type f ! -name "*.zip" > arquivos.txt

    - name: Criar arquivo .zip
      run: |
        cd ${{ github.workspace }}
        zip -r arquivos.zip -@ < arquivos.txt

    - name: Enviar arquivo .zip
      uses: actions/upload-artifact@v2
      with:
        name: arquivos-zip
        path: arquivos.zip
